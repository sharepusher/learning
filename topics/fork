#!/usr/bin/python
# coding: utf-8
# os.fork() => child process.
# return child process id in parent process. return 0 in child process

import os

def create_child(i):
    pid = os.fork()
    if pid > 0:
        print("The child process {} is {}".format(i, pid))
        return True
    elif pid == 0:
        print("This is the child process")
        return False
    else:
        raise

def main():
    for i in xrange(10):
        result = create_child(i)
        # if it's in child process, then it should be quick immediately
        # Or there will be more and more child process generated by child process
        # and endless
        if result:
            break
        else:
            print("not break on {}".format(i))
    print("finished")


if __name__ == "__main__":
    # create_child(1)
    main()



